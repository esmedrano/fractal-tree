<!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>
    </head>
    <body bgcolor="black">
        <canvas id="fractalTree" width="300" height="300"></canvas>
        <script>
            var c=document.getElementById("fractalTree");
            var ctx=c.getContext("2d");
            var PI = 3.1415;
            ctx.fillStyle = "blue";
            ctx.fillRect(0, 0, 300, 300);
            class FractalTree {
                constructor(trunk_len, theta, theta_inc, max_depth) {
                    this.self = this;
                    this.trunk_len = trunk_len;
                    this.shrink_rate = .1;
                    this.theta = theta;
                    this.holder = 0;
                    this.theta_inc = theta_inc;
                    this.max_depth = max_depth;
                    this.thetas = [PI / 2];
                    this.points = [];
                    this.start_p = [150, 300];
                    this.end_p1 = 0;
                    this.end_p2 = 0;
                    this.depth = 1; 
                    this.child = 0;
                    this.count = 0;
                    this.pair = 0;
                }
                root() {
                    ctx.beginPath;
                    ctx.moveTo(this.start_p[0], this.start_p[1]);    
                    this.start_p[1] -= this.trunk_len;
                    ctx.lineTo(this.start_p[0], this.start_p[1]);
                    ctx.stroke();
                    this.self.branch(this.start_p[0], this.start_p[1]);
                }
                branch(start_p1, start_p2) {
                    this.trunk_len -= this.trunk_len * this.shrink_rate;
                    for (;this.child < 2 ** this.depth;) {
                        this.holder = this.thetas[this.pair];
                        if (this.child % 2 == 0) {
                            this.thetas[this.pair] -= this.theta_inc;
                            this.thetas.push(this.thetas[this.pair]);
                        }
                        if (this.child % 2 != 0) {
                            this.thetas[this.pair] += this.theta_inc;
                            this.thetas.push(this.thetas[this.pair]);
                        }
                        ctx.beginPath();
                        ctx.moveTo(start_p1, start_p2);
                        this.end_p1 = start_p1 - Math.cos(this.thetas[this.pair]) * this.trunk_len;
                        this.end_p2 = start_p2 - Math.sin(this.thetas[this.pair]) * this.trunk_len;
                        ctx.lineTo(this.end_p1, this.end_p2);
                        ctx.stroke();
                        this.points.push([this.end_p1, this.end_p2]);
                        this.thetas[this.pair] = this.holder;
                        this.child ++;
                        this.count ++;
                        if (this.count % 2 == 0 && this.count != 0) {
                            start_p1 = this.points[this.pair][0];
                            start_p2 = this.points[this.pair][1];
                            this.pair ++;
                        }
                    }
                    this.child = 0;
                    this.depth ++;
                    if (this.depth <= this.max_depth) {
                        this.self.branch(start_p1, start_p2);
                    }
                }
            }
            fractal = new FractalTree(50, PI / 2, PI / 6, 5);
            fractal.root();
        </script>
    </body>
</html>
